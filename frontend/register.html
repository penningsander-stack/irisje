<!-- frontend/register.html -->
<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Account aanmaken – Irisje.nl</title>
  <link rel="stylesheet" href="/style.css?v=20260109">

  <style>
    /* Floating label – premium, subtiel */
    .field {
      position: relative;
    }

    .field input {
      width: 100%;
      padding: 1.15rem 1rem 0.9rem;
      border-radius: 1rem;
      border: 1px solid rgb(226 232 240);
      background: rgba(255,255,255,0.9);
      font-size: 0.95rem;
      transition: border-color .2s ease, box-shadow .2s ease;
    }

    .field input:focus {
      outline: none;
      border-color: rgb(99 102 241);
      box-shadow: 0 0 0 3px rgba(99,102,241,0.15);
      background: #fff;
    }

    .field label {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 0.9rem;
      color: rgb(100 116 139);
      pointer-events: none;
      background: transparent;
      transition: all .18s ease;
    }

    .field input:focus + label,
    .field input:not(:placeholder-shown) + label {
      top: 0.45rem;
      font-size: 0.7rem;
      color: rgb(79 70 229);
    }
  </style>
</head>

<body class="irisje-body">

<header class="irisje-header sticky top-0 z-40">
  <div class="max-w-6xl mx-auto px-4 py-3 lg:py-4 flex justify-between items-center">
    <a href="/" class="flex items-center space-x-2">
      <span class="inline-flex items-center justify-center w-9 h-9 rounded-2xl bg-white/90
                   text-indigo-700 text-sm font-bold shadow-brand">I</span>
      <div class="flex flex-col leading-tight">
        <span class="font-semibold text-slate-900 tracking-tight">Irisje.nl</span>
        <span class="text-[11px] text-slate-500">Zakelijk account</span>
      </div>
    </a>

    <a href="login.html" class="text-sm text-slate-600 hover:text-slate-900">
      Inloggen
    </a>
  </div>
</header>

<main class="max-w-6xl mx-auto px-4 py-12 lg:py-16">
  <div class="grid lg:grid-cols-2 gap-12 items-start">

    <!-- Left -->
    <section class="hidden lg:block">
      <div class="rounded-3xl p-9 bg-white/70 backdrop-blur border border-white/60 shadow-brand">
        <h1 class="text-3xl font-semibold tracking-tight text-slate-900">
          Zet je bedrijf professioneel online
        </h1>
        <p class="mt-4 text-slate-600 leading-relaxed">
          Maak eerst een account aan. Daarna vul je je bedrijfsprofiel in en
          ontvang je aanvragen van klanten.
        </p>
      </div>
    </section>

    <!-- Right -->
    <section>
      <div class="max-w-md mx-auto">
        <div class="mb-8">
          <div class="text-xs font-semibold text-slate-500 tracking-wide uppercase mb-2">
            Stap 1 van 2
          </div>
          <h2 class="text-2xl font-semibold tracking-tight text-slate-900">
            Account aanmaken
          </h2>
        </div>

        <div class="rounded-3xl bg-white/85 backdrop-blur border border-white/60 shadow-brand p-8">
          <form id="registerForm" class="space-y-7" novalidate>

            <div class="field">
              <input type="text" name="name" required placeholder=" " autocomplete="name">
              <label>Naam (persoon of bedrijf)</label>
            </div>

            <div class="field">
              <input type="email" name="email" required placeholder=" " autocomplete="email">
              <label>E-mailadres</label>
            </div>

            <div class="field">
              <input type="password" name="password" required minlength="8" placeholder=" " autocomplete="new-password">
              <label>Wachtwoord (min. 8 tekens)</label>
            </div>

            <div class="pt-4">
              <button type="submit" class="btn-primary w-full py-3">
                Account aanmaken
              </button>
            </div>

            <p class="text-xs text-slate-500 leading-relaxed pt-2">
              Door een account aan te maken ga je akkoord met onze
              <a href="terms.html" class="text-indigo-600 hover:underline">voorwaarden</a>
              en
              <a href="privacy.html" class="text-indigo-600 hover:underline">privacyverklaring</a>.
            </p>

          </form>

          <div class="mt-8 pt-6 border-t border-slate-200 flex items-center justify-between">
            <span class="text-sm text-slate-600">Heb je al een account?</span>
            <a href="login.html" class="text-sm font-semibold text-indigo-600 hover:underline">Inloggen</a>
          </div>
        </div>
      </div>
    </section>

  </div>
</main>

<script>
const API_BASE = "https://irisje-backend.onrender.com/api";

document.getElementById("registerForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const fd = new FormData(e.target);

  const payload = {
    name: fd.get("name").trim(),
    email: fd.get("email").trim(),
    password: fd.get("password")
  };

  if (!payload.name || !payload.email || payload.password.length < 8) {
    alert("Vul alle velden correct in.");
    return;
  }

  const res = await fetch(`${API_BASE}/auth/register`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  });

  const data = await res.json().catch(() => ({}));
  if (!res.ok) {
    alert(data.message || "Registratie mislukt");
    return;
  }

  window.location.href = "register-company.html";
});
</script>

</body>
</html>
