<!-- frontend/ad-company.html -->
<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bedrijf aanmelden ‚Äì Irisje.nl</title>
  <meta name="description" content="Voeg eenvoudig je bedrijf toe aan Irisje.nl en ontvang directe aanvragen van klanten in jouw regio." />
  <meta name="theme-color" content="#4F46E5" />
  <link rel="icon" type="image/x-icon" href="favicon.ico" />
  <link rel="stylesheet" href="style.css?v=20251206" />
</head>

<body class="irisje-body flex flex-col min-h-screen fade-seq">

<header class="irisje-header sticky top-0 z-40">
  <div class="max-w-6xl mx-auto flex items-center justify-between px-4 py-3 lg:py-4">
    <a href="index.html" class="flex items-center space-x-2">
      <span class="inline-flex items-center justify-center w-9 h-9 rounded-2xl bg-white/90 text-indigo-700 text-sm font-bold shadow-brand">I</span>
      <div class="flex flex-col leading-tight">
        <span class="font-semibold text-sm text-slate-900 tracking-tight">Irisje.nl</span>
        <span class="text-[11px] text-slate-500 hidden sm:block">Bedrijf aanmelden</span>
      </div>
    </a>
    <a href="login.html" class="btn-ghost btn-xs">Inloggen voor bedrijven</a>
  </div>
</header>

<main class="page-shell">
  <section class="surface-card p-6 md:p-8 w-full max-w-xl mx-auto">
    <h1 class="text-2xl font-bold text-indigo-700 mb-4 text-center">üè¢ Nieuw bedrijf aanmelden</h1>
    <p class="text-sm text-gray-600 text-center mb-6">
      Vul hieronder je bedrijfsgegevens in. Na goedkeuring wordt je profiel zichtbaar voor klanten op Irisje.nl.
    </p>

    <form id="companyForm" class="space-y-5">

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Bedrijfsnaam</label>
        <input id="name" required
          class="w-full border border-gray-300 rounded-xl p-3 text-sm focus:ring-2 focus:ring-indigo-500" />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Categorie</label>
        <select id="category" required
          class="w-full border border-gray-300 rounded-xl p-3 text-sm focus:ring-2 focus:ring-indigo-500">
          <option value="">‚Äî Kies een categorie ‚Äî</option>
        </select>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          Specialismes (meerdere mogelijk)
        </label>
        <div id="specialtiesContainer" class="space-y-2 text-sm text-gray-700">
          <p class="text-gray-400 text-xs">Kies eerst een categorie</p>
        </div>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Plaats</label>
        <input id="location" required
          class="w-full border border-gray-300 rounded-xl p-3 text-sm focus:ring-2 focus:ring-indigo-500" />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Korte beschrijving</label>
        <textarea id="description" rows="4" required
          class="w-full border border-gray-300 rounded-xl p-3 text-sm focus:ring-2 focus:ring-indigo-500"></textarea>
      </div>

      <button type="submit" class="w-full btn-primary py-3 text-sm font-semibold rounded-xl">
        Bedrijf toevoegen
      </button>

      <p id="message" class="text-center text-sm mt-3 min-h-[1.25rem]"></p>
    </form>
  </section>
</main>

<footer class="footer-shell mt-auto">
  <div class="max-w-6xl mx-auto px-4 py-6 text-center text-[11px] text-slate-400">
    ¬© 2025 Irisje.nl
  </div>
</footer>

<script>
const API_BASE = "https://irisje-backend.onrender.com/api";

/* üîí Centrale categorie-config (goedgekeurd) */
const CATEGORIES = {
  "Juridisch": [
    "Arbeidsrecht",
    "Ontslag (VSO)",
    "Bestuursrecht",
    "Handhaving & BOA-zaken",
    "Vergunningen & handhaving",
    "Huurrecht",
    "Aansprakelijkheidsrecht",
    "Mediation",
    "Overheidsrecht (Awb/Woo)"
  ],
  "Bouw & Vastgoed": [
    "Aannemer",
    "Bouwkundig advies",
    "Constructieberekeningen",
    "Vergunningen (omgevingsvergunning)",
    "Vastgoedrecht",
    "Bouwgeschillen",
    "Projectontwikkeling",
    "Taxaties"
  ],
  "Financieel & Administratie": [
    "Boekhouding",
    "Salarisadministratie",
    "Belastingadvies",
    "Jaarrekening",
    "Subsidies",
    "Financi√´le planning"
  ],
  "IT & Digital": [
    "Webdevelopment",
    "Softwareontwikkeling",
    "Hosting & beheer",
    "Cybersecurity",
    "Data & integraties",
    "UX/UI design"
  ],
  "Marketing & Communicatie": [
    "Online marketing",
    "SEO/SEA",
    "Social media",
    "Branding",
    "Content & copywriting",
    "Grafisch ontwerp"
  ],
  "Zorg & Welzijn": [
    "Coaching",
    "Psychosociale hulp",
    "Bedrijfsmaatschappelijk werk",
    "Re-integratie",
    "Verzuimbegeleiding"
  ],
  "Overig": [
    "Advies op maat",
    "Projectbegeleiding",
    "Interim management"
  ]
};

/* Populate categorie */
const categorySelect = document.getElementById("category");
const specialtiesContainer = document.getElementById("specialtiesContainer");

Object.keys(CATEGORIES).forEach(cat => {
  const opt = document.createElement("option");
  opt.value = cat;
  opt.textContent = cat;
  categorySelect.appendChild(opt);
});

/* Dynamische specialties */
categorySelect.addEventListener("change", () => {
  specialtiesContainer.innerHTML = "";
  const list = CATEGORIES[categorySelect.value] || [];
  list.forEach(spec => {
    const label = document.createElement("label");
    label.className = "flex items-center gap-2";
    label.innerHTML = `<input type="checkbox" value="${spec}"> ${spec}`;
    specialtiesContainer.appendChild(label);
  });
});

/* Submit */
document.getElementById("companyForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const msg = document.getElementById("message");

  const specialties = Array.from(
    specialtiesContainer.querySelectorAll("input:checked")
  ).map(cb => cb.value);

  const payload = {
    name: name.value.trim(),
    categories: [categorySelect.value],
    specialties,
    city: location.value.trim(),
    description: description.value.trim()
  };

  try {
    msg.textContent = "‚è≥ Bezig met toevoegen...";
    const res = await fetch(`${API_BASE}/companies`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });
    const data = await res.json();
    if (!res.ok) throw new Error(data.message || "Fout bij toevoegen.");

    msg.textContent = "‚úÖ Bedrijf succesvol toegevoegd!";
    msg.className = "text-green-600 text-center text-sm";
    e.target.reset();
    specialtiesContainer.innerHTML = "<p class='text-gray-400 text-xs'>Kies eerst een categorie</p>";
  } catch (err) {
    msg.textContent = "‚ùå " + err.message;
    msg.className = "text-red-600 text-center text-sm";
  }
});
</script>
</body>
</html>
